clear
clc

x=[1.0000,1.4000,1.8000,2.2000,2.6000,3.0000,3.4000,3.8000,4.2000,4.6000,5.0000];
y=[2.7183,6.6448,15.3667,30.1867,52.6542,84.5925,128.1972,186.2022,262.1349,360.7020,488.3660];

f1=1;
f2=@(x)x;
f3=@(x)x.^2;
f4=@(x)x.^3;
f5=@(x)exp(x);
f6=@(x)log(x);
A=zeros(6,6);
f=zeros(6,1);

for i=1:11
    A(1,1)=A(1,1)+f1;
    A(1,2)=A(1,2)+f1*f2(x(i));
    A(1,3)=A(1,3)+f1*f3(x(i));
    A(1,4)=A(1,4)+f1*f4(x(i));
    A(1,5)=A(1,5)+f1*f5(x(i));
    A(1,6)=A(1,6)+f1*f6(x(i));
    A(2,2)=A(2,2)+(f2(x(i)))^2;
    A(2,3)=A(2,3)+f2(x(i))*f3(x(i));
    A(2,4)=A(2,4)+f2(x(i))*f4(x(i));
    A(2,5)=A(2,5)+f2(x(i))*f5(x(i));
    A(2,6)=A(2,6)+f2(x(i))*f6(x(i));
    A(3,3)=A(3,3)+(f3(x(i)))^2;
    A(3,4)=A(3,4)+f3(x(i))*f4(x(i));
    A(3,5)=A(3,5)+f3(x(i))*f5(x(i));
    A(3,6)=A(3,6)+f3(x(i))*f6(x(i));
    A(4,4)=A(4,4)+(f4(x(i)))^2;
    A(4,5)=A(4,5)+f4(x(i))*f5(x(i));
    A(4,6)=A(4,6)+f4(x(i))*f6(x(i));
    A(5,5)=A(5,5)+(f5(x(i)))^2;
    A(5,6)=A(5,6)+f5(x(i))*f6(x(i));
    A(6,6)=A(6,6)+(f6(x(i)))^2;
end
for i=1:6
    for j=1:6
        A(j,i)=A(i,j);
    end
end

for i=1:11
    f(1)=f(1)+y(i)*f1;
    f(2)=f(2)+y(i)*f2(x(i));
    f(3)=f(3)+y(i)*f3(x(i));
    f(4)=f(4)+y(i)*f4(x(i));
    f(5)=f(5)+y(i)*f5(x(i));
    f(6)=f(6)+y(i)*f6(x(i));
end

a=pinv(A)*f
x1=1:0.01:5;
y1=a(1)+a(2)*x1+a(3)*x1.^2+a(4)*x1.^3+a(5)*exp(x1)+a(6)*log(x1); 
plot(x1,y1,x,y,'r*');